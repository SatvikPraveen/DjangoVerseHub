<!-- File: DjangoVerseHub/templates/includes/footer.html -->

{% load static %}
<footer class="bg-dark text-light py-5 mt-auto">
  <div class="container">
    <div class="row">
      <!-- Brand Section -->
      <div class="col-lg-4 col-md-6 mb-4">
        <div class="d-flex align-items-center mb-3">
          <img
            src="{% static 'images/logo.svg' %}"
            alt="DjangoVerseHub"
            width="40"
            height="40"
            class="me-2"
          />
          <h5 class="fw-bold mb-0">DjangoVerseHub</h5>
        </div>
        <p class="text-light-emphasis mb-3">
          Your gateway to the Django universe. Connect, learn, and share with
          the global Django community. Build amazing web applications together.
        </p>

        <!-- Social Links -->
        <div class="d-flex gap-3 mb-3">
          <a href="#" class="text-light fs-5" title="Twitter">
            <i class="bi bi-twitter"></i>
          </a>
          <a
            href="https://github.com/django"
            target="_blank"
            class="text-light fs-5"
            title="GitHub"
          >
            <i class="bi bi-github"></i>
          </a>
          <a href="#" class="text-light fs-5" title="LinkedIn">
            <i class="bi bi-linkedin"></i>
          </a>
          <a href="#" class="text-light fs-5" title="Discord">
            <i class="bi bi-discord"></i>
          </a>
          <a href="#" class="text-light fs-5" title="YouTube">
            <i class="bi bi-youtube"></i>
          </a>
        </div>

        <!-- Newsletter Signup -->
        <div class="mb-3">
          <h6 class="fw-semibold mb-2">Stay Updated</h6>
          <form
            class="d-flex"
            action="{% url 'newsletter:subscribe' %}"
            method="post"
          >
            {% csrf_token %}
            <input
              type="email"
              class="form-control form-control-sm me-2"
              placeholder="Enter email"
              name="email"
              required
            />
            <button type="submit" class="btn btn-primary btn-sm">
              Subscribe
            </button>
          </form>
        </div>
      </div>

      <!-- Community Links -->
      <div class="col-lg-2 col-md-3 col-sm-6 mb-4">
        <h6 class="fw-bold mb-3">Community</h6>
        <ul class="list-unstyled">
          <li class="mb-2">
            <a
              href="{% url 'articles:list' %}"
              class="text-light-emphasis text-decoration-none"
            >
              <i class="bi bi-newspaper me-2"></i>Articles
            </a>
          </li>
          <li class="mb-2">
            <a
              href="{% url 'users:list' %}"
              class="text-light-emphasis text-decoration-none"
            >
              <i class="bi bi-people me-2"></i>Members
            </a>
          </li>
          <li class="mb-2">
            <a href="#" class="text-light-emphasis text-decoration-none">
              <i class="bi bi-chat-dots me-2"></i>Discussions
            </a>
          </li>
          <li class="mb-2">
            <a href="#" class="text-light-emphasis text-decoration-none">
              <i class="bi bi-calendar-event me-2"></i>Events
            </a>
          </li>
          <li class="mb-2">
            <a href="#" class="text-light-emphasis text-decoration-none">
              <i class="bi bi-trophy me-2"></i>Leaderboard
            </a>
          </li>
        </ul>
      </div>

      <!-- Resources -->
      <div class="col-lg-2 col-md-3 col-sm-6 mb-4">
        <h6 class="fw-bold mb-3">Resources</h6>
        <ul class="list-unstyled">
          <li class="mb-2">
            <a
              href="https://docs.djangoproject.com/"
              target="_blank"
              class="text-light-emphasis text-decoration-none"
            >
              <i class="bi bi-book me-2"></i>Documentation
            </a>
          </li>
          <li class="mb-2">
            <a href="#" class="text-light-emphasis text-decoration-none">
              <i class="bi bi-play-circle me-2"></i>Tutorials
            </a>
          </li>
          <li class="mb-2">
            <a href="#" class="text-light-emphasis text-decoration-none">
              <i class="bi bi-code-square me-2"></i>API Reference
            </a>
          </li>
          <li class="mb-2">
            <a href="#" class="text-light-emphasis text-decoration-none">
              <i class="bi bi-lightbulb me-2"></i>Best Practices
            </a>
          </li>
          <li class="mb-2">
            <a href="#" class="text-light-emphasis text-decoration-none">
              <i class="bi bi-download me-2"></i>Downloads
            </a>
          </li>
        </ul>
      </div>

      <!-- Support -->
      <div class="col-lg-2 col-md-3 col-sm-6 mb-4">
        <h6 class="fw-bold mb-3">Support</h6>
        <ul class="list-unstyled">
          <li class="mb-2">
            <a href="#" class="text-light-emphasis text-decoration-none">
              <i class="bi bi-question-circle me-2"></i>Help Center
            </a>
          </li>
          <li class="mb-2">
            <a href="#" class="text-light-emphasis text-decoration-none">
              <i class="bi bi-envelope me-2"></i>Contact Us
            </a>
          </li>
          <li class="mb-2">
            <a href="#" class="text-light-emphasis text-decoration-none">
              <i class="bi bi-bug me-2"></i>Report Bug
            </a>
          </li>
          <li class="mb-2">
            <a href="#" class="text-light-emphasis text-decoration-none">
              <i class="bi bi-lightbulb me-2"></i>Feature Request
            </a>
          </li>
          <li class="mb-2">
            <a href="#" class="text-light-emphasis text-decoration-none">
              <i class="bi bi-chat-square-dots me-2"></i>Live Chat
            </a>
          </li>
        </ul>
      </div>

      <!-- Legal & Company -->
      <div class="col-lg-2 col-md-3 col-sm-6 mb-4">
        <h6 class="fw-bold mb-3">Legal</h6>
        <ul class="list-unstyled">
          <li class="mb-2">
            <a
              href="{% url 'legal:privacy' %}"
              class="text-light-emphasis text-decoration-none"
            >
              <i class="bi bi-shield-check me-2"></i>Privacy Policy
            </a>
          </li>
          <li class="mb-2">
            <a
              href="{% url 'legal:terms' %}"
              class="text-light-emphasis text-decoration-none"
            >
              <i class="bi bi-file-text me-2"></i>Terms of Service
            </a>
          </li>
          <li class="mb-2">
            <a
              href="{% url 'legal:cookies' %}"
              class="text-light-emphasis text-decoration-none"
            >
              <i class="bi bi-cookie me-2"></i>Cookie Policy
            </a>
          </li>
          <li class="mb-2">
            <a
              href="{% url 'legal:guidelines' %}"
              class="text-light-emphasis text-decoration-none"
            >
              <i class="bi bi-list-check me-2"></i>Guidelines
            </a>
          </li>
          <li class="mb-2">
            <a
              href="{% url 'about' %}"
              class="text-light-emphasis text-decoration-none"
            >
              <i class="bi bi-info-circle me-2"></i>About Us
            </a>
          </li>
        </ul>
      </div>
    </div>

    <hr class="my-4 border-secondary" />

    <!-- Bottom Footer -->
    <div class="row align-items-center">
      <div class="col-md-6 mb-3 mb-md-0">
        <div class="d-flex flex-wrap align-items-center">
          <p class="mb-0 text-light-emphasis me-3">
            &copy; {% now "Y" %} DjangoVerseHub. All rights reserved.
          </p>

          <!-- Status Indicator -->
          <div class="d-flex align-items-center">
            <div
              class="status-dot bg-success me-2"
              style="width: 8px; height: 8px; border-radius: 50%"
            ></div>
            <small class="text-success">All systems operational</small>
          </div>
        </div>
      </div>

      <div class="col-md-6 text-md-end">
        <div class="d-flex flex-wrap justify-content-md-end align-items-center">
          <!-- Language Selector -->
          <div class="dropdown me-3">
            <button
              class="btn btn-outline-secondary btn-sm dropdown-toggle"
              type="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="bi bi-globe me-1"></i>English
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="?lang=en">ðŸ‡ºðŸ‡¸ English</a></li>
              <li><a class="dropdown-item" href="?lang=es">ðŸ‡ªðŸ‡¸ EspaÃ±ol</a></li>
              <li><a class="dropdown-item" href="?lang=fr">ðŸ‡«ðŸ‡· FranÃ§ais</a></li>
              <li><a class="dropdown-item" href="?lang=de">ðŸ‡©ðŸ‡ª Deutsch</a></li>
              <li><a class="dropdown-item" href="?lang=zh">ðŸ‡¨ðŸ‡³ ä¸­æ–‡</a></li>
            </ul>
          </div>

          <p class="mb-0 text-light-emphasis">
            Made with <i class="bi bi-heart-fill text-danger"></i> for the
            Django community
          </p>
        </div>
      </div>
    </div>

    <!-- Additional Info -->
    <div class="row mt-3">
      <div class="col-12">
        <div
          class="d-flex flex-wrap justify-content-center justify-content-md-between align-items-center"
        >
          <div class="mb-2 mb-md-0">
            <small class="text-light-emphasis">
              <i class="bi bi-server me-1"></i>Server: {{ request.get_host }} {%
              if debug %}
              <span class="badge bg-warning text-dark ms-2">DEBUG MODE</span>
              {% endif %}
            </small>
          </div>

          <div class="d-flex align-items-center">
            <small class="text-light-emphasis me-3">
              <i class="bi bi-code-slash me-1"></i>
              Django {{ DJANGO_VERSION|default:"4.2" }}
            </small>

            <!-- Back to Top -->
            <button
              class="btn btn-outline-secondary btn-sm"
              onclick="scrollToTop()"
              title="Back to top"
            >
              <i class="bi bi-arrow-up"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>

<!-- Cookie Consent Banner -->
<div
  id="cookieConsent"
  class="position-fixed bottom-0 start-0 end-0 bg-dark text-light p-3 d-none"
  style="z-index: 1060"
>
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-8">
        <div class="d-flex align-items-center">
          <i class="bi bi-cookie me-2 fs-4"></i>
          <div>
            <p class="mb-0">
              <strong>We use cookies</strong> to enhance your browsing
              experience and analyze our traffic. By continuing to use our site,
              you accept our use of cookies.
            </p>
          </div>
        </div>
      </div>
      <div class="col-md-4 text-md-end mt-2 mt-md-0">
        <button
          class="btn btn-outline-light btn-sm me-2"
          onclick="showCookieSettings()"
        >
          Settings
        </button>
        <button class="btn btn-primary btn-sm" onclick="acceptCookies()">
          Accept All
        </button>
      </div>
    </div>
  </div>
</div>

<style>
  /* Footer Styling */
  footer a:hover {
    color: var(--bs-primary) !important;
    transition: color 0.3s ease;
  }

  footer .social-links a:hover {
    transform: translateY(-2px);
    transition: transform 0.3s ease;
  }

  /* Status Dot Animation */
  .status-dot {
    animation: pulse-dot 2s infinite;
  }

  @keyframes pulse-dot {
    0% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
    100% {
      opacity: 1;
    }
  }

  /* Newsletter Form */
  .newsletter-form .btn {
    white-space: nowrap;
  }

  /* Cookie Consent */
  #cookieConsent {
    border-top: 3px solid var(--bs-primary);
    backdrop-filter: blur(10px);
    background-color: rgba(33, 37, 41, 0.95) !important;
  }

  /* Responsive Footer */
  @media (max-width: 768px) {
    footer .col-lg-2 {
      margin-bottom: 2rem;
    }

    footer h6 {
      font-size: 1rem;
    }

    .social-links {
      justify-content: center !important;
    }
  }

  /* Back to Top Button */
  .btn-outline-secondary:hover {
    transform: translateY(-2px);
  }
</style>

<script>
  // Back to Top functionality
  function scrollToTop() {
    window.scrollTo({
      top: 0,
      behavior: "smooth",
    });
  }

  // Cookie Consent functionality
  document.addEventListener("DOMContentLoaded", function () {
    // Check if cookies have been accepted
    if (!localStorage.getItem("cookiesAccepted")) {
      setTimeout(() => {
        document.getElementById("cookieConsent").classList.remove("d-none");
      }, 2000);
    }
  });

  function acceptCookies() {
    localStorage.setItem("cookiesAccepted", "true");
    document.getElementById("cookieConsent").classList.add("d-none");

    // Enable analytics or other tracking scripts here
    if (window.gtag) {
      gtag("consent", "update", {
        ad_storage: "granted",
        analytics_storage: "granted",
      });
    }
  }

  function showCookieSettings() {
    // Show cookie settings modal
    alert(
      "Cookie settings would open here. Implement cookie preference modal."
    );
  }

  // Newsletter subscription
  document.addEventListener("DOMContentLoaded", function () {
    const newsletterForm = document.querySelector('form[action*="newsletter"]');
    if (newsletterForm) {
      newsletterForm.addEventListener("submit", function (e) {
        const submitBtn = this.querySelector('button[type="submit"]');
        const originalText = submitBtn.textContent;

        submitBtn.innerHTML =
          '<span class="spinner-border spinner-border-sm me-1"></span>...';
        submitBtn.disabled = true;

        // Reset after 3 seconds (adjust based on actual implementation)
        setTimeout(() => {
          submitBtn.textContent = originalText;
          submitBtn.disabled = false;
        }, 3000);
      });
    }
  });

  // Show/hide back to top button based on scroll
  window.addEventListener("scroll", function () {
    const backToTopBtn = document.querySelector(
      'button[onclick="scrollToTop()"]'
    );
    if (backToTopBtn) {
      if (window.pageYOffset > 300) {
        backToTopBtn.style.opacity = "1";
      } else {
        backToTopBtn.style.opacity = "0.7";
      }
    }
  });

  // System status checker (optional)
  function checkSystemStatus() {
    if (window.apiClient) {
      window.apiClient
        .get("system/status/")
        .then((response) => {
          const statusDot = document.querySelector(".status-dot");
          const statusText = statusDot.nextElementSibling;

          if (response.data && response.data.status === "operational") {
            statusDot.className = "status-dot bg-success me-2";
            statusText.className = "text-success";
            statusText.textContent = "All systems operational";
          } else {
            statusDot.className = "status-dot bg-warning me-2";
            statusText.className = "text-warning";
            statusText.textContent = "Some issues detected";
          }
        })
        .catch(() => {
          const statusDot = document.querySelector(".status-dot");
          const statusText = statusDot.nextElementSibling;
          statusDot.className = "status-dot bg-danger me-2";
          statusText.className = "text-danger";
          statusText.textContent = "System status unknown";
        });
    }
  }

  // Check system status every 5 minutes
  setInterval(checkSystemStatus, 300000);
</script>
